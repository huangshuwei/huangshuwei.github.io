(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["position"],{b915:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:5}},[i("i-main-container",{attrs:{"allow-scroll-y":""}},[i("i-Position-tree",{ref:"positionTree",attrs:{"is-first-node-check":""},on:{"current-node-change":e.currentNodeChange}})],1)],1),i("el-col",{attrs:{span:19}},[i("i-main-container",{attrs:{"padding-all":10,"allow-scroll-y":""}},[i("el-row",{staticClass:"operation-btns"},[i("el-button",{attrs:{type:"primary",size:"medium",plain:""},nativeOn:{click:function(t){t.stopPropagation(),e.openAddDialog()}}},[e._v("新增")]),i("el-button",{attrs:{disabled:!e.isSelectedRow,type:"primary",size:"medium",plain:""},nativeOn:{click:function(t){t.stopPropagation(),e.openUpdateDialog()}}},[e._v("修改\n\t\t\t\t")]),i("el-button",{attrs:{disabled:!e.isSelectedRow,loading:e.isDeleteBtnLoading,type:"danger",size:"medium",plain:""},nativeOn:{click:function(t){return t.stopPropagation(),e.deletePosition(t)}}},[e._v("删除\n\t\t\t\t")]),i("dm-dialog",{ref:"formDialog",attrs:{"is-confirm-btn-loading":e.isConfirmBtnLoading,width:"500px"},on:{"dialog-confirm":e.dialogConfirm}})],1),i("el-table",{ref:"positionTable",attrs:{data:e.tableData,width:"100%",border:"","highlight-current-row":""},on:{"current-change":e.handleTableRowChange}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),i("el-table-column",{attrs:{prop:"name",label:"岗位名称",width:"180"}}),i("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",width:"180"}}),i("el-table-column",{attrs:{prop:"updater",label:"修改人"}})],1)],1)],1)],1)},o=[],a=i("2f62"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{width:e.width,title:e.title,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":e.getFormLabelWidth}},[i("el-form-item",{attrs:{label:"父级部门"}},[i("el-input",{attrs:{placeholder:e.parentDepart,disabled:""}})],1),i("el-form-item",{attrs:{label:"新增部门",prop:"departmentName"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.departmentName,callback:function(t){e.$set(e.form,"departmentName","string"===typeof t?t.trim():t)},expression:"form.departmentName"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{loading:e.isConfirmBtnLoading,type:"primary"},on:{click:function(t){e.btnConfirm("ruleForm")}}},[e._v("确 定")])],1)],1)},l=[],s={DIALOG_CONFIRM:"dialog-confirm"},c={name:"DmDialog",props:{formLabelWidth:{type:Number,default:120},width:{type:String,default:"50%"},isConfirmBtnLoading:{type:Boolean,default:!1}},data:function(){return{form:{departmentName:""},dialogVisible:!1,title:"",parentDepart:"",rules:{departmentName:[{required:!0,message:"请输入部门名称",trigger:"blur"}]}}},computed:{getFormLabelWidth:function(){return this.formLabelWidth+"px"}},watch:{},methods:{openDialog:function(e){this.dialogVisible=!0,this.title=e.title,this.parentDepart=e.parentDepart,this.form.departmentName=e.currentDepartName?e.currentDepartName:""},closeDialog:function(){this.dialogVisible=!1},btnConfirm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit(s.DIALOG_CONFIRM,t.form)})}},created:function(){}},d=c,u=i("2877"),f=Object(u["a"])(d,r,l,!1,null,null,null);f.options.__file="position-dialog.vue";var p=f.exports;function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){h(e,t,i[t])})}return e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var g={ADD:0,UPDATE:1},b={name:"Position",components:{DmDialog:p},data:function(){return{tableData:[],isSelectedRow:!1,selectedRow:null,operationType:-1,currentTreeNode:null,formLabelWidth:"120px",isConfirmBtnLoading:!1,isDeleteBtnLoading:!1}},methods:m({},Object(a["b"])("Position",{addPositionAction:"addPosition",updatePositionAction:"updatePosition",deletePositionAction:"deletePosition"}),{restTableSelectedInfo:function(){this.isSelectedRow=!1,this.selectedRow=null,this.$refs.positionTable.setCurrentRow(null)},setTableSelectedInfo:function(e){this.isSelectedRow=!0,this.selectedRow=e},currentNodeChange:function(e){this.currentTreeNode=e,this.tableData=e.children,this.restTableSelectedInfo()},handleTableRowChange:function(e){e&&(this.setTableSelectedInfo(e),console.log("handleTableRowChange::",e))},openAddDialog:function(){this.operationType=g.ADD,this.$refs.formDialog.openDialog({title:"新增部门",parentDepart:this.currentTreeNode.name})},openUpdateDialog:function(){this.operationType=g.UPDATE,this.$refs.formDialog.openDialog({title:"修改部门",currentDepartName:this.selectedRow.name,parentDepart:this.currentTreeNode.name})},dialogConfirm:function(e){var t=this;this.operationType===g.ADD?(this.isConfirmBtnLoading=!0,this.addPositionAction({name:e.PositionName,parentId:this.currentTreeNode.id}).then(function(){t.$refs.formDialog.closeDialog(),t.$message({message:"新增成功",type:"success"})}).catch(function(){t.$alert("新增失败")}).finally(function(){t.isConfirmBtnLoading=!1})):this.operationType===g.UPDATE&&(this.isConfirmBtnLoading=!0,this.updatePositionAction({name:e.PositionName,id:this.selectedRow.id}).then(function(){t.$refs.formDialog.closeDialog(),t.$message({message:"修改成功",type:"success"}),t.restTableSelectedInfo()}).catch(function(){t.$alert("修改失败")}).finally(function(){t.isConfirmBtnLoading=!1}))},deletePosition:function(){var e=this;this.$confirm('是否要删除部门"'.concat(this.selectedRow.name,'"？'),"确认删除",{distinguishCancelAndClose:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){e.isDeleteBtnLoading=!0,e.deletePositionAction({id:e.selectedRow.id}).then(function(){e.$message({message:"删除成功",type:"success"})}).catch(function(){e.$alert("删除失败")}).finally(function(){e.isDeleteBtnLoading=!1})}).catch(function(e){console.log("$confirm::",e)})}})},D=b,w=(i("e68c"),Object(u["a"])(D,n,o,!1,null,"510d0812",null));w.options.__file="index.vue";t["default"]=w.exports},e3eb:function(e,t,i){},e68c:function(e,t,i){"use strict";var n=i("e3eb"),o=i.n(n);o.a}}]);
//# sourceMappingURL=position.c2f0ddf6.js.map