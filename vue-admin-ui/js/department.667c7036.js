(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["department"],{"660d":function(e,t,n){"use strict";var i=n("f5c6"),a=n.n(i);a.a},"72ea":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:5}},[n("i-main-container",{attrs:{"allow-scroll-y":""}},[n("i-department-tree",{ref:"dmTree",attrs:{"is-first-node-check":""},on:{"current-node-change":e.currentNodeChange}})],1)],1),n("el-col",{attrs:{span:19}},[n("i-main-container",{attrs:{"allow-scroll-y":""}},[n("el-row",{staticClass:"operation-btns"},[n("el-button",{attrs:{type:"primary",size:"medium",plain:""},nativeOn:{click:function(t){t.stopPropagation(),e.openAddDialog()}}},[e._v("新增")]),n("el-button",{attrs:{disabled:!e.isSelectedRow,type:"primary",size:"medium",plain:""},nativeOn:{click:function(t){t.stopPropagation(),e.openUpdateDialog()}}},[e._v("修改\n\t\t\t\t")]),n("el-button",{attrs:{disabled:!e.isSelectedRow,loading:e.isDeleteBtnLoading,type:"danger",size:"medium",plain:""},nativeOn:{click:function(t){return t.stopPropagation(),e.deleteDepartment(t)}}},[e._v("删除\n\t\t\t\t")]),n("dm-dialog",{ref:"formDialog",attrs:{"is-confirm-btn-loading":e.isConfirmBtnLoading,width:"500px"},on:{"dialog-confirm":e.dialogConfirm}})],1),n("el-table",{ref:"dmTable",attrs:{data:e.tableData,width:"100%",border:"","highlight-current-row":""},on:{"current-change":e.handleTableRowChange}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"部门名称",width:"180"}}),n("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",width:"180"}}),n("el-table-column",{attrs:{prop:"updater",label:"修改人"}})],1)],1)],1)],1)},a=[],o=n("2f62"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{width:e.width,title:e.title,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":e.getFormLabelWidth}},[n("el-form-item",{attrs:{label:"父级部门"}},[n("el-input",{attrs:{placeholder:e.parentDepart,disabled:""}})],1),n("el-form-item",{attrs:{label:"新增部门",prop:"departmentName"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.departmentName,callback:function(t){e.$set(e.form,"departmentName","string"===typeof t?t.trim():t)},expression:"form.departmentName"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{loading:e.isConfirmBtnLoading,type:"primary"},on:{click:function(t){e.btnConfirm("ruleForm")}}},[e._v("确 定")])],1)],1)},l=[],s={DIALOG_CONFIRM:"dialog-confirm"},c={name:"DmDialog",props:{formLabelWidth:{type:Number,default:120},width:{type:String,default:"50%"},isConfirmBtnLoading:{type:Boolean,default:!1}},data:function(){return{form:{departmentName:""},dialogVisible:!1,title:"",parentDepart:"",rules:{departmentName:[{required:!0,message:"请输入部门名称",trigger:"blur"}]}}},computed:{getFormLabelWidth:function(){return this.formLabelWidth+"px"}},watch:{},methods:{openDialog:function(e){this.dialogVisible=!0,this.title=e.title,this.parentDepart=e.parentDepart,this.form.departmentName=e.currentDepartName?e.currentDepartName:""},closeDialog:function(){this.dialogVisible=!1},btnConfirm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit(s.DIALOG_CONFIRM,t.form)})}},created:function(){}},d=c,m=n("2877"),u=Object(m["a"])(d,r,l,!1,null,null,null);u.options.__file="dm-dialog.vue";var p=u.exports;function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={ADD:0,UPDATE:1},b={name:"Department",components:{DmDialog:p},data:function(){return{tableData:[],isSelectedRow:!1,selectedRow:null,operationType:-1,currentTreeNode:null,formLabelWidth:"120px",isConfirmBtnLoading:!1,isDeleteBtnLoading:!1}},methods:f({},Object(o["b"])("department",{addDepartmentAction:"addDepartment",updateDepartmentAction:"updateDepartment",deleteDepartmentAction:"deleteDepartment"}),{restTableSelectedInfo:function(){this.isSelectedRow=!1,this.selectedRow=null,this.$refs.dmTable.setCurrentRow(null)},setTableSelectedInfo:function(e){this.isSelectedRow=!0,this.selectedRow=e},currentNodeChange:function(e){this.currentTreeNode=e,this.tableData=e.children,this.restTableSelectedInfo()},handleTableRowChange:function(e){e&&(this.setTableSelectedInfo(e),console.log("handleTableRowChange::",e))},openAddDialog:function(){this.operationType=g.ADD,this.$refs.formDialog.openDialog({title:"新增部门",parentDepart:this.currentTreeNode.name})},openUpdateDialog:function(){this.operationType=g.UPDATE,this.$refs.formDialog.openDialog({title:"修改部门",currentDepartName:this.selectedRow.name,parentDepart:this.currentTreeNode.name})},dialogConfirm:function(e){var t=this;this.operationType===g.ADD?(this.isConfirmBtnLoading=!0,this.addDepartmentAction({name:e.departmentName,parentId:this.currentTreeNode.id}).then(function(){t.$refs.formDialog.closeDialog(),t.$message({message:"新增成功",type:"success"})}).catch(function(){t.$alert("新增失败")}).finally(function(){t.isConfirmBtnLoading=!1})):this.operationType===g.UPDATE&&(this.isConfirmBtnLoading=!0,this.updateDepartmentAction({name:e.departmentName,id:this.selectedRow.id}).then(function(){t.$refs.formDialog.closeDialog(),t.$message({message:"修改成功",type:"success"}),t.restTableSelectedInfo()}).catch(function(){t.$alert("修改失败")}).finally(function(){t.isConfirmBtnLoading=!1}))},deleteDepartment:function(){var e=this;this.$confirm('是否要删除部门"'.concat(this.selectedRow.name,'"？'),"确认删除",{distinguishCancelAndClose:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){e.isDeleteBtnLoading=!0,e.deleteDepartmentAction({id:e.selectedRow.id}).then(function(){e.$message({message:"删除成功",type:"success"})}).catch(function(){e.$alert("删除失败")}).finally(function(){e.isDeleteBtnLoading=!1})}).catch(function(e){console.log("$confirm::",e)})}})},D=b,w=(n("660d"),Object(m["a"])(D,i,a,!1,null,"1531e220",null));w.options.__file="index.vue";t["default"]=w.exports},f5c6:function(e,t,n){}}]);
//# sourceMappingURL=department.667c7036.js.map